"use strict";angular.module("config",[]).constant("ENV",{name:"development",apiEndpoint:"http://rad-magento-16.dev",defaultLang:"fr"}),window.scrollTo(0,1),angular.module("angularApp",["ngAnimate","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","pascalprecht.translate","xml","config","nl2br"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/index.html",controller:"MainCtrl"}).when("/login",{templateUrl:"views/account/login.html",controller:"LoginCtrl"}).when("/connexion",{templateUrl:"views/account/connexion.html",controller:"ConnexionCtrl"}).when("/logout",{templateUrl:"views/loading.html",controller:"LogoutCtrl"}).when("/register",{templateUrl:"views/account/register.html",controller:"RegisterCtrl"}).when("/lost-password",{templateUrl:"views/account/lost-password.html",controller:"LostPasswordCtrl"}).otherwise({redirectTo:"/"})}]).config(["$httpProvider",function(a){a.interceptors.push("xmlHttpInterceptor")}]).config(["$translateProvider",function(a){var b={TITLE:"Rad.co",APP_NAME:"Rad",login:{with_facebook:"Se connecter avec Facebook",or_register_email:"Connexion ou inscription par e-mail"},form:{submit:"Valider"},error:{connexion_lost:"Problème de connexion, veuillez re-essayer plus tard."},connexion:{form:{legend:"Veillez saisir vos identifiants de connexion.","email.placeholder":"Adresse email","password.placeholder":"Mot de passe"},facebook:"Se connecter avec facebook"},register:{new_account:"Créer un nouveau compte",title:"Inscription",facebook:"S'inscrire avec Facebook",form:{legend:"Merci de renseigner tous les champs suivantes.","firstname.placeholder":"Prénom","lastname.placeholder":"Nom","email.placeholder":"Adresse email","password.placeholder":"Mot de passe","birthday.placeholder":"31/12/2000","cell.placeholder":"06 06 06 06 06"}},lostpass:{title:"Aide","form.legend":"Veuillez renseigner votre adresse e-mail.","form.email.placeholder":"Adresse e-mail."},"":""},c=function(a,b,d){return angular.forEach(b,function(b,e){"string"==typeof b?a[d+e]=b:a=c(a,b,d+e+".")}),a};a.translations("fr",c({},b,"")),a.preferredLanguage("fr"),a.useSanitizeValueStrategy(null)}]),angular.module("angularApp").controller("MainCtrl",["$scope","$location",function(a,b){b.url("/login")}]),angular.module("angularApp").directive("splashScreen",function(){return{restrict:"A",link:function(a,b){angular.element(document).ready(function(){b.remove()})}}}),angular.module("angularApp").controller("LoginCtrl",["$scope",function(a){}]),angular.module("angularApp").controller("ConnexionCtrl",["$scope","$rootScope","User","$location",function(a,b,c,d){a.title="Connexion",b.bodyClass="gray",a.email="",a.password="",a.loading=!1,a.error=null,a.submitForm=function(){return a.loading=!0,a.error=null,c.login(a.email,a.password).then(function(b){"success"==b.message.status?d.path("/"):(a.loading=!1,a.error=b.message.text)},function(){a.error="error.connexion_lost"}),!1}}]),angular.module("angularApp").controller("RegisterCtrl",["$scope","$rootScope","User","$location",function(a,b,c,d){a.title="Connexion",b.bodyClass="gray",a.firstname="",a.lastname="",a.email="",a.password="",a.loading=!1,a.error=null,a.errors=null;var e=function(){return{email:a.email,password:a.password,confirmation:a.password,is_subscribed:!0,firstname:a.firstname,lastname:a.lastname}};a.submitForm=function(){a.loading=!0,a.error=null,a.errors=null,c.register(e()).then(function(b){"success"==b.message.status?d.path("/"):(a.loading=!1,a.errors=b.message.text)},function(){a.loading=!1,a.error="error.connexion_lost"})}}]),angular.module("angularApp").controller("LostPasswordCtrl",["$scope","$rootScope",function(a,b){a.title="lostpass.title",b.bodyClass="gray",a.email="",a.submitForm=function(){}}]),angular.module("angularApp").service("CurrentUser",function(){return{}}),angular.module("angularApp").service("User",["$http","$q","ApiLink","MagentoPostRequest","$cookies",function(a,b,c,d,e){var f="_token_user",g=e.get(f)||null,h=function(b){g=b,b?(e.put(f,b),a.defaults.headers.common.Authorization='token="'+b+'"'):(e.remove(f),delete a.defaults.headers.common.Authorization)},i=function(a){return"object"==typeof a.data?(a.data.message.token&&h(a.data.message.token),a.data):b.reject(a.data)},j=function(a){return b.reject(a.data)},k=function(a,b){return d(c.get("customer","login"),{username:a,password:b},g).then(i,j)},l=function(a){return d(c.get("customer","save"),a,g).then(i,j)},m=function(){return console.log("ICI"),a({method:"GET",url:c.get("customer","logout"),headers:{Authorization:'token="'+g+'"'}}).then(h(null))};return{login:k,logout:m,register:l}}]),angular.module("angularApp").service("ApiLink",["ENV","Lang",function(a,b){var c=function(c,d){return a.apiEndpoint+"/"+b.get()+"/xmlconnect/"+c+"/"+d+"/app_code/"+b.getAppCode()};return{get:c}}]),angular.module("angularApp").service("Lang",["ENV","$cookies",function(a,b){var c="fr us uk de".split(" "),d=b.get("lang")||a.defaultLang,e=function(){return d},f=function(a){a=a.toLowerCase();for(var b=0;b<c.length;b++)if(c[b]===a.toLowerCase()){d=a;break}return d};return{get:e,set:f,getAppCode:function(){return"fr_iph1"}}}]),angular.module("angularApp").service("MagentoPostRequest",["$http","$httpParamSerializer",function(a,b){return function(c,d,e){var f={"Content-Type":"application/x-www-form-urlencoded"};return e&&(f.Authorization='token="'+e+'"'),a({method:"POST",url:c,headers:f,data:b(d)})}}]),angular.module("angularApp").directive("loader",function(){return{template:'<div class="loader-directive"><div class="loader"></div></div>'}}),angular.module("angularApp").controller("LogoutCtrl",["$scope","$location","User",function(a,b,c){c.logout(),b.path("/")}]);